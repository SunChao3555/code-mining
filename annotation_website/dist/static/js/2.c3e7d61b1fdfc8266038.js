webpackJsonp([2],{Fs8J:function(t,e,a){"use strict";var s=a("mtWM"),n=a.n(s),i=a("YaEn"),o=a("IcnI");e.a={data:function(){return{dismissCountDown:0,successMessage:null,authed:o.a.state.isLogged,admin:o.a.state.isAdmin,name:localStorage.getItem("name"),currentPassword:null,newPassword:null,changePasswordErrorMessage:null,showModal:!0,tabIndex:0,historyPageIndex:1,historyPageLength:10,totalAnnotations:0,historyFields:["id","title","decision","actions"],historyItems:[],invitePageIndex:1,invitePageLength:10,totalInviteCodes:0,inviteFields:["code","actions"],inviteItems:[],candidateId:null,candidate:{intent:null,snippet:null,decision:null},body:{title:null,postBody:null,answerBody:null}}},beforeCreate:function(){o.a.state.isLogged?this.authed=!0:i.a.push("/login")},methods:{generateInviteCode:function(){this.successMessage=null;var t=this;n.a.post("/api/invite_code",{}).then(function(e){t.successMessage=e.data.msg,t.loadInviteCode()})},deleteCode:function(t){this.successMessage=null;var e=this,a="/api/invite_code/"+t;n.a.delete(a).then(function(t){e.successMessage=t.data.msg,e.loadInviteCode()})},copyed:function(t){this.successMessage='Code "'+t.text+'" has been copied to clipboard'},countDownChanged:function(t){this.dismissCountDown=t},loadHistory:function(){var t=this,e=(this.historyPageIndex-1)*this.historyPageLength,a="/api/history/"+e+"/"+this.historyPageLength;n.a.get(a).then(function(e){t.totalAnnotations=e.data.count,t.historyItems=e.data.items,null===t.candidateId&&(t.candidateId=e.data.count)}).catch(function(t){console.log(t)})},loadInviteCode:function(){var t=this,e=(this.invitePageIndex-1)*this.invitePageLength,a="/api/invite_code/"+e+"/"+this.invitePageLength;n.a.get(a).then(function(e){t.totalInviteCodes=e.data.count,t.inviteItems=e.data.items}).catch(function(t){console.log(t)})},loadCandidate:function(t){var e=this,a="/api/candidate/"+t;n.a.get(a).then(function(t){e.candidate=t.data;var a=t.data.postId,s=t.data.answerId,i="/api/body/"+a+"/"+s;n.a.get(i).then(function(t){e.body=t.data}).catch(function(t){console.log(t)})}).catch(function(t){console.log(t)})},save:function(t){var e=this,a="/api/save/"+this.candidateId;n.a.post(a,{action:t,rewerittenIntent:e.candidate.intent}).then(function(t){var a=(e.historyPageIndex-1)*e.historyPageLength,s=e.historyPageIndex*e.historyPageLength;e.candidateId>=a&&e.candidateId<s&&e.loadHistory(),e.totalAnnotations=t.data.count,e.candidateId++}).catch(function(t){console.log(t)})},previous:function(){this.candidateId>0&&this.candidateId--},next:function(){this.candidateId<this.totalAnnotations&&this.candidateId++},check:function(t){this.candidateId=t,this.tabIndex=1},latest:function(){this.candidateId=this.totalAnnotations},signout:function(){o.a.commit("LOGOUT_USER"),i.a.push("/login")},changePassword:function(t){this.successMessage=null,this.changePasswordErrorMessage=null;var e=this;t.preventDefault();n.a.post("/api/change_password",{currentPassword:this.currentPassword,newPassword:this.newPassword}).then(function(t){e.$refs.modalChangePass.hide(),e.successMessage=t.data.msg}).catch(function(t){if(t.response){var a=t.response;e.changePasswordErrorMessage=a.data.msg}e.changePasswordErrorMessage||(e.changePasswordErrorMessage=t.message),console.log(t)})},clearPasswords:function(){this.currentPassword=null,this.newPassword=null,this.changePasswordErrorMessage=null,this.showModal=!1;var t=this;this.$nextTick(function(){t.showModal=!0})}},watch:{successMessage:function(t){null!==t&&(this.successMessage=t,this.dismissCountDown=10)},candidateId:function(t){this.loadCandidate(t),this.candidateId=t},historyPageIndex:function(t){this.historyPageIndex=t,this.loadHistory()},invitePageIndex:function(t){this.invitePageIndex=t,this.loadInviteCode()}},mounted:function(){this.loadHistory(),this.admin&&this.loadInviteCode()}}},U0NP:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-navbar",{attrs:{toggleable:"md",type:"dark",variant:"dark"}},[a("b-navbar-brand",{attrs:{href:"#"}},[t._v("Conala")]),t._v(" "),a("b-collapse",{attrs:{"is-nav":"",id:"nav_collapse"}},[a("b-navbar-nav",{staticClass:"ml-auto"},[a("b-nav-item-dropdown",{attrs:{right:""}},[a("template",{slot:"button-content"},[t._v(t._s(t.name))]),t._v(" "),a("b-dropdown-item",{directives:[{name:"b-modal",rawName:"v-b-modal.modalChangePass",modifiers:{modalChangePass:!0}}]},[t._v("Change password")]),t._v(" "),a("b-dropdown-item",{on:{click:function(e){t.signout()}}},[t._v("Sign out")])],2)],1)],1)],1),t._v(" "),a("b-modal",{ref:"modalChangePass",attrs:{id:"modalChangePass",title:"Change password",centered:"","no-fade":""},on:{ok:t.changePassword,hide:t.clearPasswords}},[a("b-alert",{attrs:{show:null!==t.changePasswordErrorMessage,dismissible:"",variant:"danger"}},[t._v(t._s(t.changePasswordErrorMessage))]),t._v(" "),t.showModal?a("form",[a("b-form-group",{attrs:{label:"Current Password:","label-for":"currentPassword"}},[a("b-form-input",{ref:"currentPassword",attrs:{id:"currentPassword",type:"password",required:"",placeholder:"Enter current password"},model:{value:t.currentPassword,callback:function(e){t.currentPassword=e},expression:"currentPassword"}})],1),t._v(" "),a("b-form-group",{attrs:{label:"New Password:","label-for":"newPassword"}},[a("b-form-input",{ref:"newPassword",attrs:{id:"newPassword",type:"password",required:"",placeholder:"Enter new password"},model:{value:t.newPassword,callback:function(e){t.newPassword=e},expression:"newPassword"}})],1)],1):t._e()],1),t._v(" "),t.authed?a("b-container",[a("b-alert",{attrs:{show:t.dismissCountDown,dismissible:"",variant:"success"},on:{dismissed:function(e){t.dismissCountDown=0},"dismiss-count-down":t.countDownChanged}},[t._v(t._s(t.successMessage))]),t._v(" "),a("b-card",{attrs:{"no-body":""}},[a("b-tabs",{attrs:{card:"","no-fade":""},model:{value:t.tabIndex,callback:function(e){t.tabIndex=e},expression:"tabIndex"}},[a("b-tab",{attrs:{title:"Progress"}},[a("b-pagination",{attrs:{align:"center","total-rows":t.totalAnnotations,"per-page":t.historyPageLength},model:{value:t.historyPageIndex,callback:function(e){t.historyPageIndex=e},expression:"historyPageIndex"}}),t._v(" "),a("b-table",{attrs:{bordered:"",hover:"",striped:"",items:t.historyItems,fields:t.historyFields},scopedSlots:t._u([{key:"actions",fn:function(e){return[a("b-btn",{attrs:{size:"sm"},on:{click:function(a){a.stopPropagation(),t.check(e.item.id)}}},[t._v("Check")])]}}])})],1),t._v(" "),a("b-tab",{attrs:{title:"Workspace"}},[a("b-card-group",{staticClass:"mb-3",attrs:{deck:""}},[a("b-card",{attrs:{"border-variant":"primary","header-bg-variant":"primary","header-text-variant":"white"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("b-row",{attrs:{"align-h":"between"}},[a("b-col",{attrs:{cols:"auto"}},[a("b-btn",{attrs:{variant:"success",pressed:"Saved"===t.candidate.decision},on:{click:function(e){t.save("save")}}},[t._v("Save")]),t._v(" "),a("b-btn",{attrs:{variant:"danger",pressed:"Discarded"===t.candidate.decision},on:{click:function(e){t.save("discard")}}},[t._v("Discard")]),t._v(" "),a("b-btn",{attrs:{variant:"warning",pressed:"Skipped"===t.candidate.decision},on:{click:function(e){t.save("skip")}}},[t._v("Skip")]),t._v(" "),a("b-btn",{attrs:{variant:"outline-light",disabled:t.candidateId<=0},on:{click:function(e){t.previous()}}},[t._v("Previous")]),t._v(" "),a("b-btn",{attrs:{variant:"outline-light",disabled:t.candidateId>=t.totalAnnotations},on:{click:function(e){t.next()}}},[t._v("Next")]),t._v(" "),a("b-btn",{attrs:{variant:"outline-light"},on:{click:function(e){t.latest()}}},[t._v("Latest")])],1),t._v(" "),a("b-col",{attrs:{cols:"auto"}},[t._v(t._s(t.candidate.decision)+" Candidate - ["+t._s(t.candidateId)+"]")])],1)],1),t._v(" "),a("div",[a("b-form-textarea",{model:{value:t.candidate.intent,callback:function(e){t.$set(t.candidate,"intent",e)},expression:"candidate.intent"}})],1),t._v(" "),a("div",[a("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs",value:t.candidate.snippet,expression:"candidate.snippet"}],staticClass:"mt-3"},[a("code")])])])],1),t._v(" "),a("b-card-group",{staticClass:"mb-3",attrs:{deck:""}},[a("b-card",{attrs:{"border-variant":"success","header-bg-variant":"success","header-text-variant":"white"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("b-row",{attrs:{"align-h":"between"}},[a("b-col",{attrs:{cols:"auto"}},[t._v(t._s(t.body.title))]),t._v(" "),a("b-col",{attrs:{cols:"auto"}},[t._v("Answer")])],1)],1),t._v(" "),a("div",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}],domProps:{innerHTML:t._s(t.body.answerBody)}})])],1),t._v(" "),a("b-card-group",{staticClass:"mb-3",attrs:{deck:""}},[a("b-card",{attrs:{"border-variant":"info","header-bg-variant":"info","header-text-variant":"white"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("b-row",{attrs:{"align-h":"between"}},[a("b-col",{attrs:{cols:"auto"}},[t._v(t._s(t.body.title))]),t._v(" "),a("b-col",{attrs:{cols:"auto"}},[t._v("Question")])],1)],1),t._v(" "),a("div",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}],domProps:{innerHTML:t._s(t.body.postBody)}})])],1)],1),t._v(" "),t.admin?a("b-tab",{attrs:{title:"Invitation"}},[a("b-row",{staticClass:"mb-2"},[a("b-col",{attrs:{md:""}},[a("b-btn",{attrs:{variant:"primary"},on:{click:t.generateInviteCode}},[t._v("Generate a new code")])],1)],1),t._v(" "),a("b-pagination",{attrs:{align:"center","total-rows":t.totalInviteCodes,"per-page":t.invitePageLength},model:{value:t.invitePageIndex,callback:function(e){t.invitePageIndex=e},expression:"invitePageIndex"}}),t._v(" "),a("b-table",{attrs:{bordered:"",hover:"",striped:"",items:t.inviteItems,fields:t.inviteFields},scopedSlots:t._u([{key:"actions",fn:function(e){return[a("b-btn",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.item.code,expression:"row.item.code",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.copyed,expression:"copyed",arg:"success"}],attrs:{size:"sm"}},[t._v("Copy")]),t._v(" "),a("b-btn",{attrs:{size:"sm",variant:"danger"},on:{click:function(a){a.stopPropagation(),t.deleteCode(e.item.code)}}},[t._v("Delete")])]}}])})],1):t._e()],1)],1)],1):t._e()],1)},n=[],i={render:s,staticRenderFns:n};e.a=i},lO7g:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("Fs8J"),n=a("U0NP"),i=a("VU/8"),o=i(s.a,n.a,!1,null,null,null);e.default=o.exports}});
//# sourceMappingURL=2.c3e7d61b1fdfc8266038.js.map